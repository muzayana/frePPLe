<?xml version="1.0" encoding="UTF-8" ?>
<plan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <name>Forecast test model</name>
  <description>
  This test verifies the forecast distribution functionality.
  This functionality allows specifying the forecast demand for a certain
  date range. The system will then break down the demand into smaller time
  buckets that are used for planning the forecast.
  Two scenarios are modelled:
  1: A forecast broken down into daily and weekly buckets.
  2: A forecast split across bucket boundaries
  </description>
  <current>2009-01-01T00:00:00</current>

  <!--
  This calendar defines how forecast values are disaggregated from the
  -->
  <calendars>
    <calendar name="planningbuckets">
      <buckets>
        <!--
          The value for saturday and sunday is set to zero.
          The forecast is only allowed on weekdays.
        -->
        <!--
          The weight for a monday is higher than a friday.
          This can be used to model situations where more orders are
          expected to be shipped on monday than on fridays.
          Another usage may be to model cases where a peak of orders is
          expected for delivery near the end of a month.
          The weights model the ordering profile of the customers.
        -->
        <bucket start="2009-01-01T00:00:00" end="2009-01-02T00:00:00" value="1.2"/>
        <bucket start="2009-01-02T00:00:00" end="2009-01-03T00:00:00" value="1"/>
        <bucket start="2009-01-03T00:00:00" end="2009-01-04T00:00:00" value="1"/>
        <bucket start="2009-01-04T00:00:00" end="2009-01-05T00:00:00" value="1"/>
        <bucket start="2009-01-05T00:00:00" end="2009-01-06T00:00:00" value="0.8"/>
        <bucket start="2009-01-06T00:00:00" end="2009-01-07T00:00:00" value="0"/>
        <bucket start="2009-01-07T00:00:00" end="2009-01-08T00:00:00" value="0"/>
        <bucket start="2009-01-08T00:00:00" end="2009-01-09T00:00:00" value="1.2"/>
        <bucket start="2009-01-09T00:00:00" end="2009-01-10T00:00:00" value="1"/>
        <bucket start="2009-01-10T00:00:00" end="2009-01-11T00:00:00" value="1"/>
        <bucket start="2009-01-11T00:00:00" end="2009-01-12T00:00:00" value="1"/>
        <bucket start="2009-01-12T00:00:00" end="2009-01-13T00:00:00" value="0.8"/>
        <bucket start="2009-01-13T00:00:00" end="2009-01-14T00:00:00" value="0"/>
        <bucket start="2009-01-14T00:00:00" end="2009-01-15T00:00:00" value="0"/>
        <bucket start="2009-01-15T00:00:00" end="2009-01-16T00:00:00" value="1.2"/>
        <bucket start="2009-01-16T00:00:00" end="2009-01-17T00:00:00" value="1"/>
        <bucket start="2009-01-17T00:00:00" end="2009-01-18T00:00:00" value="1"/>
        <bucket start="2009-01-18T00:00:00" end="2009-01-19T00:00:00" value="1"/>
        <bucket start="2009-01-19T00:00:00" end="2009-01-20T00:00:00" value=".8"/>
        <bucket start="2009-01-20T00:00:00" end="2009-01-21T00:00:00" value="0"/>
        <bucket start="2009-01-21T00:00:00" end="2009-01-22T00:00:00" value="0"/>
        <!--
          The value of the weekly buckets is set to 5/7 to account for
          the unavailable saturday and sunday.
        -->
        <bucket start="2009-01-22T00:00:00" end="2009-01-29T00:00:00" value="0.7142857"/>
        <bucket start="2009-01-29T00:00:00" end="2009-02-05T00:00:00" value="0.7142857"/>
        <bucket start="2009-02-05T00:00:00" end="2009-02-12T00:00:00" value="0.7142857"/>
        <bucket start="2009-02-12T00:00:00" end="2009-02-19T00:00:00" value="0.7142857"/>
        <bucket start="2009-02-19T00:00:00" end="2009-02-26T00:00:00" value="0.7142857"/>
        <bucket start="2009-02-26T00:00:00" end="2009-03-05T00:00:00" value="0.7142857"/>
        <bucket start="2009-03-05T00:00:00" end="2009-03-12T00:00:00" value="0.7142857"/>
        <bucket start="2009-03-12T00:00:00" end="2009-03-19T00:00:00" value="0.7142857"/>
        <bucket start="2009-03-19T00:00:00" end="2009-03-26T00:00:00" value="0.7142857"/>
        <bucket start="2009-03-26T00:00:00" end="2009-04-02T00:00:00" value="0.7142857"/>
        <bucket start="2009-04-02T00:00:00" end="2009-04-09T00:00:00" value="0.7142857"/>
        <bucket start="2009-04-09T00:00:00" end="2009-04-16T00:00:00" value="0.7142857"/>
        <bucket start="2009-04-16T00:00:00" end="2009-04-23T00:00:00" value="0.7142857"/>
        <bucket start="2009-04-23T00:00:00" end="2009-04-30T00:00:00" value="0.7142857"/>
        <bucket start="2009-04-30T00:00:00" end="2009-05-07T00:00:00" value="0.7142857"/>
        <bucket start="2009-05-07T00:00:00" end="2009-05-14T00:00:00" value="0.7142857"/>
      </buckets>
    </calendar>
  </calendars>

  <items>
    <item name="Product 1">
      <operation name="delivery 1" xsi:type="operation_fixed_time">
        <duration>P1D</duration>
      </operation>
    </item>
    <item name="Product 2">
      <operation name="delivery 2" xsi:type="operation_fixed_time">
        <duration>P1D</duration>
      </operation>
    </item>
  </items>

  <demands>
    <!--
      The forecast value is specfied for a date range of 4 weeks.
      For planning in frepple the forecast is spread over 21 daily buckets and
      a weekly bucket.
      Among the daily buckets saturdays and sundays don't get any
      forecast. Also, mondays are busier than fridays.
    -->
    <demand name="Forecast 1" xsi:type="demand_forecast">
      <item name="Product 1" />
      <priority>1</priority>
      <calendar name="planningbuckets" />
      <buckets>
        <bucket>
          <start>2009-01-01T00:00:00</start>
          <end>2009-01-29T00:00:00</end>
          <!-- 4 weeks with 5 working days per week, expecting an average
          forecast of 20 per working day. -->
          <total>400</total>
        </bucket>
      </buckets>
    </demand>

    <!--
      The forecast value is specified in calendar months.
      For planning in frepple the forecast is spread over weeks.
      Since the week and month boundaries don't align, the forecast is
      proportionally split across all intersecting weeks.
      This functionality is typically used to translate between the
      time granularity of the sales department (which creates a sales forecast
      per calendar month) and the manufacturing department (which creates
      manufacturing and procurement plans in weekly or daily buckets).
    -->
    <demand name="Forecast 2" xsi:type="demand_forecast">
      <item name="Product 2" />
      <priority>1</priority>
      <calendar name="planningbuckets" />
      <buckets>
        <bucket>
          <start>2009-03-01T00:00:00</start>
          <end>2009-04-01T00:00:00</end>
          <!-- 31 days in march, expecting an average forecast of 10 per day -->
          <total>310</total>
        </bucket>
      </buckets>
    </demand>
  </demands>

<?python
frepple.solver_mrp(name="MRP", plantype=2).solve()
frepple.saveXMLfile("output.1.xml")
frepple.saveplan("output.2.xml")
?>

</plan>
