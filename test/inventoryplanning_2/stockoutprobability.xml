<?xml version="1.0" encoding="UTF-8" ?>
<plan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <name>Stockout Probability test case</name>
  <description>
    This test verifies the stockout probability calculation.
  </description>
  <current>2016-01-01T00:00:00</current>
  <calendars>
    <calendar name="months">
      <buckets>
        <bucket start="2015-01-01T00:00:00" end="2015-02-01T00:00:00" value="1"/>
        <bucket start="2015-02-01T00:00:00" end="2015-03-01T00:00:00" value="1"/>
        <bucket start="2015-03-01T00:00:00" end="2015-04-01T00:00:00" value="1"/>
        <bucket start="2015-04-01T00:00:00" end="2015-05-01T00:00:00" value="1"/>
        <bucket start="2015-05-01T00:00:00" end="2015-06-01T00:00:00" value="1"/>
        <bucket start="2015-06-01T00:00:00" end="2015-07-01T00:00:00" value="1"/>
        <bucket start="2015-07-01T00:00:00" end="2015-08-01T00:00:00" value="1"/>
        <bucket start="2015-08-01T00:00:00" end="2015-09-01T00:00:00" value="1"/>
        <bucket start="2015-09-01T00:00:00" end="2015-10-01T00:00:00" value="1"/>
        <bucket start="2015-10-01T00:00:00" end="2015-11-01T00:00:00" value="1"/>
        <bucket start="2015-11-01T00:00:00" end="2015-12-01T00:00:00" value="1"/>
        <bucket start="2015-12-01T00:00:00" end="2016-01-01T00:00:00" value="1"/>
        <bucket start="2016-01-01T00:00:00" end="2016-02-01T00:00:00" value="1"/>
        <bucket start="2016-02-01T00:00:00" end="2016-03-01T00:00:00" value="1"/>
        <bucket start="2016-03-01T00:00:00" end="2016-04-01T00:00:00" value="1"/>
        <bucket start="2016-04-01T00:00:00" end="2016-05-01T00:00:00" value="1"/>
        <bucket start="2016-05-01T00:00:00" end="2016-06-01T00:00:00" value="1"/>
        <bucket start="2016-06-01T00:00:00" end="2016-07-01T00:00:00" value="1"/>
        <bucket start="2016-07-01T00:00:00" end="2016-08-01T00:00:00" value="1"/>
        <bucket start="2016-08-01T00:00:00" end="2016-09-01T00:00:00" value="1"/>
        <bucket start="2016-09-01T00:00:00" end="2016-10-01T00:00:00" value="1"/>
        <bucket start="2016-10-01T00:00:00" end="2016-11-01T00:00:00" value="1"/>
        <bucket start="2016-11-01T00:00:00" end="2016-12-01T00:00:00" value="1"/>
        <bucket start="2016-12-01T00:00:00" end="2017-01-01T00:00:00" value="1"/>                
      </buckets>
    </calendar>
  </calendars>
  
  <items>
    <item name="product with lead time 30">
      <price>1</price>
      <itemsuppliers>
        <itemsupplier>
          <supplier name="vendor" />
          <leadtime>P30D</leadtime>
        </itemsupplier>
      </itemsuppliers>
    </item>
    <item name="product with lead time 60">
      <price>1</price>      
      <itemsuppliers>
        <itemsupplier>
          <supplier name="vendor" />
          <leadtime>P60D</leadtime>
        </itemsupplier>
      </itemsuppliers>
    </item>
    <item name="product with lead time 90">
      <price>1</price>
      <itemsuppliers>
        <itemsupplier>
          <supplier name="vendor" />
          <leadtime>P90D</leadtime>
        </itemsupplier>
      </itemsuppliers>
    </item>    
    <item name="product with lead time 120">
      <price>1</price>
      <itemsuppliers>
        <itemsupplier>
          <supplier name="vendor" />
          <leadtime>P120D</leadtime>
        </itemsupplier>
      </itemsuppliers>
    </item>
  </items>    

  
  <buffers>
    <buffer>
      <name>product with lead time 30</name>
      <item name="product with lead time 30"/>
      <location name="factory"/>
    </buffer>
    <buffer>
      <name>product with lead time 60</name>
      <item name="product with lead time 60"/>
      <location name="factory"/>
    </buffer>
    <buffer>
      <name>product with lead time 90</name>
      <item name="product with lead time 90"/>
      <location name="factory"/>
    </buffer>
    <buffer>
      <name>product with lead time 120</name>
      <item name="product with lead time 120"/>
      <location name="factory"/>
    </buffer>            
  </buffers>
  
  <demands>
    <!-- Demand for item with lead time 30 -->    
    <demand>
      <name>Demand 30 - jan</name>
      <due>2016-01-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - feb</name>
      <due>2016-02-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - mar</name>
      <due>2016-03-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - apr</name>
      <due>2016-04-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>     
    <demand>
      <name>Demand 30 - may</name>
      <due>2016-05-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - jun</name>
      <due>2016-06-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - jul</name>
      <due>2016-07-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - aug</name>
      <due>2016-08-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>     
    <demand>
      <name>Demand 30 - sep</name>
      <due>2016-09-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - oct</name>
      <due>2016-10-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - nov</name>
      <due>2016-11-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 30 - dec</name>
      <due>2016-12-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>     
    <!-- Demand for item with lead time 60 -->    
    <demand>
      <name>Demand 60 - jan</name>
      <due>2016-01-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - feb</name>
      <due>2016-02-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - mar</name>
      <due>2016-03-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - apr</name>
      <due>2016-04-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>     
    <demand>
      <name>Demand 60 - may</name>
      <due>2016-05-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - jun</name>
      <due>2016-06-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - jul</name>
      <due>2016-07-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - aug</name>
      <due>2016-08-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>     
    <demand>
      <name>Demand 60 - sep</name>
      <due>2016-09-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - oct</name>
      <due>2016-10-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - nov</name>
      <due>2016-11-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 60 - dec</name>
      <due>2016-12-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 60"/>
      <location name="factory"/>     
    </demand>     
    <!-- Demand for item with lead time 90 -->    
    <demand>
      <name>Demand 90 - jan</name>
      <due>2016-01-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - feb</name>
      <due>2016-02-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - mar</name>
      <due>2016-03-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - apr</name>
      <due>2016-04-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>     
    <demand>
      <name>Demand 90 - may</name>
      <due>2016-05-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - jun</name>
      <due>2016-06-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - jul</name>
      <due>2016-07-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - aug</name>
      <due>2016-08-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>     
    <demand>
      <name>Demand 90 - sep</name>
      <due>2016-09-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - oct</name>
      <due>2016-10-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - nov</name>
      <due>2016-11-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 90"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 90 - dec</name>
      <due>2016-12-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 30"/>
      <location name="factory"/>     
    </demand>     
    <!-- Demand for item with lead time 120 -->    
    <demand>
      <name>Demand 120 - jan</name>
      <due>2016-01-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - feb</name>
      <due>2016-02-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - mar</name>
      <due>2016-03-15T00:00:00</due>
      <quantity>5</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - apr</name>
      <due>2016-04-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>     
    <demand>
      <name>Demand 120 - may</name>
      <due>2016-05-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - jun</name>
      <due>2016-06-15T00:00:00</due>
      <quantity>15</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - jul</name>
      <due>2016-07-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - aug</name>
      <due>2016-08-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>     
    <demand>
      <name>Demand 120 - sep</name>
      <due>2016-09-15T00:00:00</due>
      <quantity>25</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - oct</name>
      <due>2016-10-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - nov</name>
      <due>2016-11-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>
    <demand>
      <name>Demand 120 - dec</name>
      <due>2016-12-15T00:00:00</due>
      <quantity>35</quantity>      
      <item name="product with lead time 120"/>
      <location name="factory"/>     
    </demand>     
      </demands>

<?python

with open("output.2.xml", "wt", encoding='utf-8') as output:
  
  
    # Run the inventory planning solver to compute the safety stock and reorder quantities
    solver =  frepple.solver_inventoryplanning(
			  calendar=frepple.calendar(name='months'),
			  horizon_start=0,
			  horizon_end=365,
			  holding_cost=0.05,
			  fixed_order_cost=20,
			  loglevel=0,
			  )
	
	for o in range(0,100,10);
		for b in frepple.buffers();
			b.onhand = o
			print("stockout probability for",b.name,"with on hand",b.onhand,":",computeStockoutRisk(b),file=output)
	  
    
?>

</plan>
